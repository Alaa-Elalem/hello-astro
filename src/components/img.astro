---
import { Image } from '@astrojs/image/components'

export type Props = astroHTML.JSX.ImgHTMLAttributes;

const { src, ...attrs } = Astro.props as Props

const defaultImage = '../images/undraw/undraw_my_feed_inj0.png'

// ugly hack to circumvent astro issue with dynamic import
// https://github.com/withastro/astro/issues/3373
const images = import.meta.glob('../images/**/*')
// console.log(images)
// for (const path in images) {
//   images[path]().then((image) => {
//     console.log(path, image)
//   })
// }
const image = await (images[src || defaultImage])() as Record<string, any>
---
<Image src={image.default} alt={attrs.alt} class={attrs.class} />
